(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ng-textflow', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/common'], factory) :
    (factory((global['ng-textflow'] = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common));
}(this, (function (exports,core,rxjs,operators,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeComponent = (function () {
        // Inject services.
        function NodeComponent(renderer, elementRef) {
            this.renderer = renderer;
            this.elementRef = elementRef;
            this._heading = '';
            this._isVisible = false;
            this._pageNumberAtTop = false;
            this.showHeading = true;
            // Get host properties to dynamically change.
            this.hostPosition = '';
            this.hostVisibility = 'hidden';
            // Dynamic styles.
            this.numberStyle = {};
            this.headingStyle = {};
            this.nodeStyle = {};
            this.hostStyle = {};
            this.defaultStyles = {
                hostStyle: {},
                contentStyle: {
                    'height': '9em',
                    'width': '200px',
                    'fontSize': '11px',
                    'wordSpacing': '2px',
                    'textAlign': 'justify',
                    'lineHeight': '1.1em',
                    'leftAlignLast': 'justified'
                },
                headingStyle: {
                    'font-size': '14px',
                    'height': '25px'
                },
                numberStyle: {
                    'font-size': '10px',
                }
            };
            this.overflowSubject = new rxjs.Subject();
            this.overflow = /** @type {?} */ (this.overflowSubject);
            this.adding = false;
            this.finishing = false;
            this.trimming = false;
            this.count = 100;
        }
        /**
         * @return {?}
         */
        NodeComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                // Some initialisation.
                this.dummyText = this.text;
                this.trimming = true;
                // We use the mutation observer to see when our dummy text change has happened.
                this.changes = new MutationObserver(function (mutations) { return _this.manageState(); });
                this.changes.observe(this.dummyDivRef.nativeElement, { attributes: true, childList: true, characterData: true });
                // Kick off the state machine here, but with a delay for the first node,
                // since the initial loading of the component causes some delay in other initialisation. (I think).
                setTimeout(function () {
                    // Wait till index is resolved.
                    // We need to pause for the first node since the loading is lazy?
                    if (_this.index >= 99) {
                        setTimeout(function () { return _this.manageState(); }, 200); // TODO: find a event driven method here.
                    }
                    else {
                        // The following nodes do not need this delay.
                        // The following nodes do not need this delay.
                        _this.manageState();
                    }
                });
            };
        Object.defineProperty(NodeComponent.prototype, "dummyText", {
            // Some getter/setter methods.
            get: /**
             * @return {?}
             */ function () { return this.dummyDivRef.nativeElement.textContent; },
            set: /**
             * @param {?} content
             * @return {?}
             */ function (content) { this.dummyDivRef.nativeElement.textContent = content; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeComponent.prototype, "isVisible", {
            get: /**
             * @return {?}
             */ function () { return this._isVisible; },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._isVisible = value;
                this.hostVisibility = 'visible';
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeComponent.prototype, "index", {
            get: /**
             * @return {?}
             */ function () { return this._index; },
            set: /**
             * @param {?} index
             * @return {?}
             */ function (index) {
                var _this = this;
                this.pageNumber = 100 - index;
                setTimeout(function () {
                    _this._index = Math.abs(index);
                    _this.renderer.setStyle(_this.elementRef.nativeElement, 'z-index', index);
                });
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeComponent.prototype, "width", {
            get: /**
             * @return {?}
             */ function () { return parseInt(this.mask.nativeElement.style.width.replace(/\D/g, '')); },
            set: /**
             * @param {?} width
             * @return {?}
             */ function (width) { this.renderer.setStyle(this.mask.nativeElement, 'width', width + "px"); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeComponent.prototype, "heading", {
            get: /**
             * @return {?}
             */ function () { return this._heading; },
            set: /**
             * @param {?} heading
             * @return {?}
             */ function (heading) {
                this._heading = heading === '' ? this._heading = ' ' : this._heading = heading;
                NodeComponent.headingChangedSubject.next();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeComponent.prototype, "pageNumberAtTop", {
            get: /**
             * @return {?}
             */ function () { return this._pageNumberAtTop; },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._pageNumberAtTop = value;
                this.numberStyle['padding-bottom'] = this.pageNumberAtTop ? '0px' : this.padding + "px";
                this.numberStyle['padding-top'] = this.pageNumberAtTop ? this.padding + "px" : '0px';
            },
            enumerable: true,
            configurable: true
        });
        // Apply the style to the current node. Assumes the correct attributes are contained.
        /**
         * @param {?} style
         * @return {?}
         */
        NodeComponent.prototype.applyStyle = /**
         * @param {?} style
         * @return {?}
         */
            function (style) {
                this.nodeStyle = style.contentStyle ? this.convertStyleToPx(style.contentStyle) : this.convertStyleToPx(this.defaultStyles.contentStyle);
                this.numberStyle = style.numberStyle ? style.numberStyle : this.defaultStyles.numberStyle;
                this.hostStyle = style.hostStyle ? style.hostStyle : this.defaultStyles.hostStyle;
                // Let's manipulate the padding style that was added to manage top or bottom placed numbering.
                if (this.numberStyle.padding > '') {
                    this.padding = parseInt(this.numberStyle.padding.replace(/\D/g, ''));
                }
                else {
                    this.padding = 16;
                }
                this.numberStyle['padding-left'] = parseInt(this.nodeStyle.width.replace(/\D/g, '')) / 2 + "px";
                this.headingStyle = style.headingStyle ? style.headingStyle : this.defaultStyles.headingStyle;
                this.headingStyle.width = this.nodeStyle.width;
                this.renderer.setStyle(this.elementRef.nativeElement, 'width', style.width);
                this.nodeStyle.overflow = 'hidden';
                this.width = parseInt(this.nodeStyle.width.replace(/\D/g, ''));
                if (this.isOverlaid) {
                    this.hostPosition = 'absolute';
                }
            };
        /**
         * @param {?} style
         * @return {?}
         */
        NodeComponent.prototype.convertStyleToPx = /**
         * @param {?} style
         * @return {?}
         */
            function (style) {
                /** @type {?} */
                var tempStyle = style;
                /** @type {?} */
                var fontSizeSuffix = tempStyle['fontSize'].replace(/[\d\.]/g, '');
                /** @type {?} */
                var fontSize = parseFloat(tempStyle['fontSize'].replace(/[A-Za-z]/g, ''));
                for (var key in tempStyle) {
                    // Not we need to check each value only, for em, pt, px etc..
                    if (((tempStyle[key])).indexOf('em') > 0) {
                        /** @type {?} */
                        var suffix = tempStyle[key].replace(/[\d\.]/g, '');
                        switch (suffix) {
                            case 'em': {
                                /** @type {?} */
                                var value = parseFloat(tempStyle[key].replace(/[A-Za-z]/g, ''));
                                tempStyle[key] = Math.round(value * fontSize) + "px";
                            }
                        }
                    }
                }
                return tempStyle;
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.parseLineHeight = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var lineHeight = this.textDivRef.nativeElement.style.lineHeight;
                return parseInt(lineHeight.replace(/\D/g, ''));
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.compareDivs = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var lineHeight = this.parseLineHeight();
                /** @type {?} */
                var dummyLines = Math.floor(this.dummyDivRef.nativeElement.clientHeight / lineHeight);
                /** @type {?} */
                var contentLines = Math.floor(this.textDivRef.nativeElement.clientHeight / lineHeight);
                /** @type {?} */
                var dummyTextWordCount = this.dummyText.split(' ').length;
                return {
                    'lines': dummyLines,
                    'diffLines': dummyLines - contentLines,
                    'words': dummyTextWordCount
                };
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.manageState = /**
         * @return {?}
         */
            function () {
                // Protect against infinite loop.
                if (this.count-- <= 0) {
                    this.trimming = false;
                    this.adding = false;
                    this.finishing = false;
                    console.log('ERROR - loop count > 100');
                }
                if (this.trimming) {
                    this.trim();
                }
                else if (this.adding) {
                    this.addword();
                }
                else if (this.finishing) {
                    this.finish();
                }
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.trim = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var comps = this.compareDivs();
                /** @type {?} */
                var wordsToRemove = Math.floor(comps.words / comps.lines) * (comps.diffLines + 1);
                if (wordsToRemove > 0) {
                    this.dummyText = this.dummyText.split(' ').slice(0, comps.words - wordsToRemove).join(' ');
                }
                else {
                    this.trimming = false;
                    this.adding = true;
                    this.addword();
                }
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.addword = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var comps = this.compareDivs();
                if (comps.diffLines <= -1) {
                    if (this.dummyText.length < this.text.length) {
                        this.dummyText = this.dummyText + ' ' + this.text.split(' ')[comps.words];
                    }
                    else {
                        // This is the last node.
                        this.renderer.setStyle(this.textDivRef.nativeElement, 'textAlignLast', 'left');
                        NodeComponent.finishedSubject.next();
                    }
                }
                else {
                    // Take off the last word again.
                    this.dummyText = this.dummyText.split(' ').slice(0, comps.words - 1).join(' ');
                    this.adding = false;
                    this.finishing = true;
                }
            };
        /**
         * @return {?}
         */
        NodeComponent.prototype.finish = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var comps = this.compareDivs();
                /** @type {?} */
                var lastword = this.dummyText.split(' ');
                /** @type {?} */
                var overflowArray = this.text.split(' ');
                /** @type {?} */
                var overflow = overflowArray.slice(this.dummyText.split(' ').length).join(' ');
                this.text = this.dummyText;
                this.finishing = false;
                this.overflowSubject.next(overflow);
            };
        NodeComponent.finishedSubject = new rxjs.Subject();
        NodeComponent.finished = /** @type {?} */ (NodeComponent.finishedSubject);
        NodeComponent.headingChangedSubject = new rxjs.Subject();
        NodeComponent.headingChanged = NodeComponent.headingChangedSubject.pipe(operators.debounce(function () { return rxjs.interval(10); }));
        NodeComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'app-node',
                        template: "\n    <div class=\"mask\" #maskTag [ngStyle]=\"hostStyle\">\n      <div *ngIf=\"showPageNumber && pageNumberAtTop\" [ngStyle]=\"numberStyle\">\n        {{pageNumber}}\n      </div>  \n      <div *ngIf=\"showHeading\" [ngStyle]=\"headingStyle\">\n        {{heading}}\n      </div>\n      <div #textref [ngStyle]=\"nodeStyle\" class=\"content\">\n        {{text}}\n        <div #dummy class=\"dummy\" >{{ dummyText }}</div>\n      </div>\n      <div *ngIf=\"showPageNumber && !pageNumberAtTop\" [ngStyle]=\"numberStyle\">\n        {{pageNumber}}\n      </div>\n    </div>\n",
                        styles: ["\n    .content {\n      position: relative;\n      text-align-last: justify;\n      cursor: default;\n    }\n    .mask {\n      display block;\n      overflow: hidden;\n    }\n    :host {\n      display: block;\n      overflow: hidden;\n      user-select: none;\n    }\n    .dummy {\n      position: absolute;\n      background-color: rgba(155, 255, 155, 0.4);\n      left: 0px;\n      top: 0px;\n      visibility: hidden;\n    }\n  "]
                    }] }
        ];
        /** @nocollapse */
        NodeComponent.ctorParameters = function () {
            return [
                { type: core.Renderer2 },
                { type: core.ElementRef }
            ];
        };
        NodeComponent.propDecorators = {
            textDivRef: [{ type: core.ViewChild, args: ['textref',] }],
            dummyDivRef: [{ type: core.ViewChild, args: ['dummy',] }],
            mask: [{ type: core.ViewChild, args: ['maskTag',] }],
            hostPosition: [{ type: core.HostBinding, args: ['style.position',] }],
            hostVisibility: [{ type: core.HostBinding, args: ['style.visibility',] }]
        };
        return NodeComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var CreateFlowService = (function () {
        function CreateFlowService(injector, resolver) {
            var _this = this;
            this.injector = injector;
            this.resolver = resolver;
            this.nodeList = new Array();
            this.firstOnTop = true;
            this.overFlowSubscriptions = [];
            this.nodesSubject = new rxjs.BehaviorSubject(null);
            this.nodes = /** @type {?} */ (this.nodesSubject);
            this.nodeFactory = this.resolver.resolveComponentFactory(NodeComponent);
            // When all nodes are finished generating, do some housework.
            this.finishedSubscription = NodeComponent.finished.subscribe(function () {
                _this.nodeList.forEach(function (node) { return node.isVisible = true; }); // Make all visible once complete.
                // If headings are modified externally, then update sibling nodes to maintain consistent formating.
                // If headings are modified externally, then update sibling nodes to maintain consistent formating.
                _this.headingChangedSubscription = NodeComponent.headingChanged.subscribe(function () {
                    /** @type {?} */
                    var count = 0;
                    _this.nodeList.forEach(function (node) {
                        count = node.heading <= ' ' ? count + 1 : count - 1;
                    });
                    // Loop again to update the visibility of the headings.
                    // Loop again to update the visibility of the headings.
                    _this.nodeList.forEach(function (node) {
                        node.showHeading = count === _this.nodeList.length ? false : true;
                    });
                });
                // Make list of nodes available once all are complete.
                // Make list of nodes available once all are complete.
                _this.nodesSubject.next(_this.nodeList);
            });
        }
        /**
         * @return {?}
         */
        CreateFlowService.prototype.clearNodes = /**
         * @return {?}
         */
            function () {
                this.nodeList = [];
            };
        // This will kick off a process that generates a node every time a generated node is too full and overflows with text.
        /**
         * @param {?} textPassage
         * @param {?} location
         * @param {?} style
         * @param {?} showPageNumbers
         * @param {?} isOverlaid
         * @return {?}
         */
        CreateFlowService.prototype.createFlow = /**
         * @param {?} textPassage
         * @param {?} location
         * @param {?} style
         * @param {?} showPageNumbers
         * @param {?} isOverlaid
         * @return {?}
         */
            function (textPassage, location, style, showPageNumbers, isOverlaid) {
                var _this = this;
                /** @type {?} */
                var node = this.createNode(textPassage, location, style, showPageNumbers, isOverlaid);
                // Create a new node if there is any overflow text from last node generated.
                // Last node will know when it is the last one, and will
                this.overFlowSubscriptions.push(node.overflow.subscribe(function (overflowText) {
                    if (overflowText) {
                        _this.createFlow(overflowText, location, style, showPageNumbers, isOverlaid);
                    }
                }));
            };
        /**
         * @param {?} content
         * @param {?=} location
         * @param {?=} style
         * @param {?=} showPageNumbers
         * @param {?=} isOverlaid
         * @return {?}
         */
        CreateFlowService.prototype.createNode = /**
         * @param {?} content
         * @param {?=} location
         * @param {?=} style
         * @param {?=} showPageNumbers
         * @param {?=} isOverlaid
         * @return {?}
         */
            function (content, location, style, showPageNumbers, isOverlaid) {
                /** @type {?} */
                var nodeRef;
                if (location || location instanceof core.ViewContainerRef) {
                    nodeRef = location.createComponent(this.nodeFactory, undefined, this.injector);
                }
                else {
                    nodeRef = this.nodeFactory.create(this.injector);
                }
                // Update the node
                nodeRef.instance.isOverlaid = isOverlaid;
                nodeRef.instance.showPageNumber = showPageNumbers;
                nodeRef.instance.text = content;
                if (style) {
                    nodeRef.instance.applyStyle(style);
                }
                // Add node to list of nodes and update its index value.
                this.nodeList.push(nodeRef.instance);
                nodeRef.instance.index = this.firstOnTop ? 100 - this.nodeList.length : this.nodeList.length;
                return nodeRef.instance;
            };
        // Tidy up subscriptions.
        /**
         * @return {?}
         */
        CreateFlowService.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.finishedSubscription.unsubscribe();
                this.headingChangedSubscription.unsubscribe();
                this.overFlowSubscriptions.forEach(function (subscription) {
                    subscription.unsubscribe();
                });
            };
        CreateFlowService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        CreateFlowService.ctorParameters = function () {
            return [
                { type: core.Injector },
                { type: core.ComponentFactoryResolver }
            ];
        };
        return CreateFlowService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgTextflowComponent = (function () {
        function NgTextflowComponent(nodeService) {
            this.nodeService = nodeService;
            this.nodeStyles = {};
            this.firstOnTop = true;
            nodeService.firstOnTop = this.firstOnTop;
        }
        Object.defineProperty(NgTextflowComponent.prototype, "content", {
            get: /**
             * @return {?}
             */ function () { return this._content; },
            set: /**
             * @param {?} text
             * @return {?}
             */ function (text) {
                this._content = text;
                // Clear the nodes out of the NodeComponent[] array.
                this.nodeService.clearNodes();
                this.viewContainer.clear();
                this.nodeService.createFlow(this.content, this.viewContainer, this.nodeStyles, this.showPageNumbers, this.isOverlaid);
            },
            enumerable: true,
            configurable: true
        });
        NgTextflowComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-textflow',
                        template: " \n    <ng-container #viewContainer></ng-container>\n  "
                    }] }
        ];
        /** @nocollapse */
        NgTextflowComponent.ctorParameters = function () {
            return [
                { type: CreateFlowService }
            ];
        };
        NgTextflowComponent.propDecorators = {
            viewContainer: [{ type: core.ViewChild, args: ['viewContainer', { read: core.ViewContainerRef },] }],
            nodeStyles: [{ type: core.Input }],
            firstOnTop: [{ type: core.Input }],
            showPageNumbers: [{ type: core.Input }],
            isOverlaid: [{ type: core.Input }],
            content: [{ type: core.Input }]
        };
        return NgTextflowComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgTextflowModule = (function () {
        function NgTextflowModule() {
        }
        /**
         * @return {?}
         */
        NgTextflowModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: NgTextflowModule,
                    providers: [CreateFlowService]
                };
            };
        NgTextflowModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [NgTextflowComponent, NodeComponent],
                        entryComponents: [NodeComponent],
                        exports: [NgTextflowComponent]
                    },] }
        ];
        return NgTextflowModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgTextflowModule = NgTextflowModule;
    exports.NodeComponent = NodeComponent;
    exports.CreateFlowService = CreateFlowService;
    exports.ɵa = NgTextflowComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctdGV4dGZsb3cudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZy10ZXh0Zmxvdy9uZy10ZXh0Zmxvdy9ub2RlLmNvbXBvbmVudC50cyIsIm5nOi8vbmctdGV4dGZsb3cvbmctdGV4dGZsb3cvY3JlYXRlLWZsb3cuc2VydmljZS50cyIsIm5nOi8vbmctdGV4dGZsb3cvbmctdGV4dGZsb3cvbmctdGV4dGZsb3cuY29tcG9uZW50LnRzIiwibmc6Ly9uZy10ZXh0Zmxvdy9uZy10ZXh0Zmxvdy9uZy10ZXh0Zmxvdy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgUmVuZGVyZXIyLCBPbkRlc3Ryb3ksIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIGludGVydmFsIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuLy8gQGR5bmFtaWNcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtbm9kZScsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgY2xhc3M9XCJtYXNrXCIgI21hc2tUYWcgW25nU3R5bGVdPVwiaG9zdFN0eWxlXCI+XHJcbiAgICAgIDxkaXYgKm5nSWY9XCJzaG93UGFnZU51bWJlciAmJiBwYWdlTnVtYmVyQXRUb3BcIiBbbmdTdHlsZV09XCJudW1iZXJTdHlsZVwiPlxyXG4gICAgICAgIHt7cGFnZU51bWJlcn19XHJcbiAgICAgIDwvZGl2PiAgXHJcbiAgICAgIDxkaXYgKm5nSWY9XCJzaG93SGVhZGluZ1wiIFtuZ1N0eWxlXT1cImhlYWRpbmdTdHlsZVwiPlxyXG4gICAgICAgIHt7aGVhZGluZ319XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2ICN0ZXh0cmVmIFtuZ1N0eWxlXT1cIm5vZGVTdHlsZVwiIGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgIHt7dGV4dH19XHJcbiAgICAgICAgPGRpdiAjZHVtbXkgY2xhc3M9XCJkdW1teVwiID57eyBkdW1teVRleHQgfX08L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgKm5nSWY9XCJzaG93UGFnZU51bWJlciAmJiAhcGFnZU51bWJlckF0VG9wXCIgW25nU3R5bGVdPVwibnVtYmVyU3R5bGVcIj5cclxuICAgICAgICB7e3BhZ2VOdW1iZXJ9fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5gLFxyXG4gIHN0eWxlczogW2BcclxuICAgIC5jb250ZW50IHtcclxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICB0ZXh0LWFsaWduLWxhc3Q6IGp1c3RpZnk7XHJcbiAgICAgIGN1cnNvcjogZGVmYXVsdDtcclxuICAgIH1cclxuICAgIC5tYXNrIHtcclxuICAgICAgZGlzcGxheSBibG9jaztcclxuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIH1cclxuICAgIDpob3N0IHtcclxuICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgfVxyXG4gICAgLmR1bW15IHtcclxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE1NSwgMjU1LCAxNTUsIDAuNCk7XHJcbiAgICAgIGxlZnQ6IDBweDtcclxuICAgICAgdG9wOiAwcHg7XHJcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAgIH1cclxuICBgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTm9kZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQFZpZXdDaGlsZCgndGV4dHJlZicpIHByaXZhdGUgdGV4dERpdlJlZjogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCdkdW1teScpICBwcml2YXRlIGR1bW15RGl2UmVmOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ21hc2tUYWcnKSBwcml2YXRlIG1hc2s6IEVsZW1lbnRSZWY7XHJcblxyXG4gIHByaXZhdGUgX2luZGV4OiBudW1iZXI7ICBcclxuICBwcml2YXRlIF9oZWFkaW5nOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIF9pc1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIF9wYWdlTnVtYmVyQXRUb3A6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIGNoYW5nZXM6IE11dGF0aW9uT2JzZXJ2ZXI7XHJcbiAgcHJpdmF0ZSBwYWRkaW5nOiBudW1iZXI7XHJcbiAgXHJcbiAgc2hvd0hlYWRpbmc6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBzaG93UGFnZU51bWJlcjogYm9vbGVhbjtcclxuICBpc092ZXJsYWlkOiBib29sZWFuO1xyXG4gIHBhZ2VOdW1iZXI6IG51bWJlcjtcclxuXHJcbiAgLy8gR2V0IGhvc3QgcHJvcGVydGllcyB0byBkeW5hbWljYWxseSBjaGFuZ2UuXHJcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS5wb3NpdGlvbicpIGhvc3RQb3NpdGlvbiA9ICcnO1xyXG4gIEBIb3N0QmluZGluZygnc3R5bGUudmlzaWJpbGl0eScpIGhvc3RWaXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblxyXG4gIC8vIER5bmFtaWMgc3R5bGVzLlxyXG4gIG51bWJlclN0eWxlOiBhbnkgPSB7fTtcclxuICBoZWFkaW5nU3R5bGU6IGFueSA9IHt9O1xyXG4gIG5vZGVTdHlsZTogYW55ID0ge307XHJcbiAgaG9zdFN0eWxlOiBhbnkgPSB7fTtcclxuXHJcbiAgLy8gRGVmYXVsdCBzdHlsZSBpbmNhc2UgdGhlcmUgaXMgbm9uZSBzdXBwbGllZC5cclxuICBwcml2YXRlIGRlZmF1bHRTdHlsZXMgPSB7XHJcbiAgICBob3N0U3R5bGU6IHt9LFxyXG4gICAgY29udGVudFN0eWxlOiB7XHJcbiAgICAgICdoZWlnaHQnOiAnOWVtJyxcclxuICAgICAgJ3dpZHRoJzogJzIwMHB4JyxcclxuICAgICAgJ2ZvbnRTaXplJzogJzExcHgnLFxyXG4gICAgICAnd29yZFNwYWNpbmcnOiAnMnB4JyxcclxuICAgICAgJ3RleHRBbGlnbic6ICdqdXN0aWZ5JyxcclxuICAgICAgJ2xpbmVIZWlnaHQnOiAnMS4xZW0nLFxyXG4gICAgICAnbGVmdEFsaWduTGFzdCc6ICdqdXN0aWZpZWQnXHJcbiAgICB9LFxyXG4gICAgaGVhZGluZ1N0eWxlOiB7XHJcbiAgICAgICdmb250LXNpemUnOiAnMTRweCcsXHJcbiAgICAgICdoZWlnaHQnOiAnMjVweCdcclxuICAgIH0sXHJcbiAgICBudW1iZXJTdHlsZToge1xyXG4gICAgICAnZm9udC1zaXplJzogJzEwcHgnLFxyXG4gICAgfVxyXG4gIH07IFxyXG5cclxuICAvLyBNb3JlIHRleHQgdG8gcHV0IGludG8gbm9kZXMsIHNvIG92ZXJmbG93LlxyXG4gIHByaXZhdGUgb3ZlcmZsb3dTdWJqZWN0OiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xyXG4gIG92ZXJmbG93OiBPYnNlcnZhYmxlPHN0cmluZz4gPSB0aGlzLm92ZXJmbG93U3ViamVjdCBhcyBPYnNlcnZhYmxlPHN0cmluZz47XHJcblxyXG4gIC8vIExhc3Qgbm9kZSBjb21wbGV0ZS5cclxuICBwcml2YXRlIHN0YXRpYyBmaW5pc2hlZFN1YmplY3Q6IFN1YmplY3Q8bnVsbD4gPSBuZXcgU3ViamVjdCgpO1xyXG4gIHN0YXRpYyBmaW5pc2hlZDogT2JzZXJ2YWJsZTxudWxsPiA9IE5vZGVDb21wb25lbnQuZmluaXNoZWRTdWJqZWN0IGFzIE9ic2VydmFibGU8bnVsbD47XHJcblxyXG4gIC8vIEhlYWRpbmcgaGFzIGNoYW5nZWQuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaGVhZGluZ0NoYW5nZWRTdWJqZWN0OiBTdWJqZWN0PG51bGw+ID0gbmV3IFN1YmplY3QoKTtcclxuICBzdGF0aWMgaGVhZGluZ0NoYW5nZWQ6IE9ic2VydmFibGU8bnVsbD4gPSBOb2RlQ29tcG9uZW50LmhlYWRpbmdDaGFuZ2VkU3ViamVjdC5waXBlKGRlYm91bmNlKCgpID0+IGludGVydmFsKDEwKSkpO1xyXG5cclxuICAvLyBJbmplY3Qgc2VydmljZXMuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHsgfTtcclxuXHJcbiAgbmdPbkluaXQoKSB7ICAgIFxyXG4gICAgLy8gU29tZSBpbml0aWFsaXNhdGlvbi5cclxuICAgIHRoaXMuZHVtbXlUZXh0ID0gdGhpcy50ZXh0O1xyXG4gICAgdGhpcy50cmltbWluZyA9IHRydWU7XHJcblxyXG4gICAgLy8gV2UgdXNlIHRoZSBtdXRhdGlvbiBvYnNlcnZlciB0byBzZWUgd2hlbiBvdXIgZHVtbXkgdGV4dCBjaGFuZ2UgaGFzIGhhcHBlbmVkLlxyXG4gICAgdGhpcy5jaGFuZ2VzID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4gdGhpcy5tYW5hZ2VTdGF0ZSgpKTtcclxuICAgIHRoaXMuY2hhbmdlcy5vYnNlcnZlKHRoaXMuZHVtbXlEaXZSZWYubmF0aXZlRWxlbWVudCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XHJcblxyXG4gICAgLy8gS2ljayBvZmYgdGhlIHN0YXRlIG1hY2hpbmUgaGVyZSwgYnV0IHdpdGggYSBkZWxheSBmb3IgdGhlIGZpcnN0IG5vZGUsXHJcbiAgICAvLyBzaW5jZSB0aGUgaW5pdGlhbCBsb2FkaW5nIG9mIHRoZSBjb21wb25lbnQgY2F1c2VzIHNvbWUgZGVsYXkgaW4gb3RoZXIgaW5pdGlhbGlzYXRpb24uIChJIHRoaW5rKS5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4geyAvLyBXYWl0IHRpbGwgaW5kZXggaXMgcmVzb2x2ZWQuXHJcbiAgICAgIC8vIFdlIG5lZWQgdG8gcGF1c2UgZm9yIHRoZSBmaXJzdCBub2RlIHNpbmNlIHRoZSBsb2FkaW5nIGlzIGxhenk/XHJcbiAgICAgIGlmICh0aGlzLmluZGV4ID49IDk5KSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLm1hbmFnZVN0YXRlKCksIDIwMCk7IC8vIFRPRE86IGZpbmQgYSBldmVudCBkcml2ZW4gbWV0aG9kIGhlcmUuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBub2RlcyBkbyBub3QgbmVlZCB0aGlzIGRlbGF5LlxyXG4gICAgICAgIHRoaXMubWFuYWdlU3RhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIFNvbWUgZ2V0dGVyL3NldHRlciBtZXRob2RzLlxyXG4gIGdldCBkdW1teVRleHQoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuZHVtbXlEaXZSZWYubmF0aXZlRWxlbWVudC50ZXh0Q29udGVudDsgfVxyXG4gIHNldCBkdW1teVRleHQoY29udGVudDogc3RyaW5nKSB7IHRoaXMuZHVtbXlEaXZSZWYubmF0aXZlRWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7IH1cclxuICBcclxuICBnZXQgaXNWaXNpYmxlKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5faXNWaXNpYmxlOyB9XHJcbiAgc2V0IGlzVmlzaWJsZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5faXNWaXNpYmxlID0gdmFsdWU7XHJcbiAgICB0aGlzLmhvc3RWaXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGluZGV4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9pbmRleDsgfVxyXG4gIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBhZ2VOdW1iZXIgPSAxMDAgLSBpbmRleDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbmRleCA9IE1hdGguYWJzKGluZGV4KTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3otaW5kZXgnLCBpbmRleCk7IFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXQgd2lkdGgoKTogbnVtYmVyIHsgcmV0dXJuIHBhcnNlSW50KHRoaXMubWFzay5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoLnJlcGxhY2UoL1xcRC9nLCAnJykpIH1cclxuICBzZXQgd2lkdGgod2lkdGg6IG51bWJlcikgeyB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubWFzay5uYXRpdmVFbGVtZW50LCAnd2lkdGgnLCBgJHt3aWR0aH1weGApIH1cclxuICBcclxuICBnZXQgaGVhZGluZygpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5faGVhZGluZzsgfVxyXG4gIHNldCBoZWFkaW5nKGhlYWRpbmc6IHN0cmluZykgeyBcclxuICAgIHRoaXMuX2hlYWRpbmcgPSBoZWFkaW5nID09PSAnJyA/IHRoaXMuX2hlYWRpbmcgPSAnICcgOiB0aGlzLl9oZWFkaW5nID0gaGVhZGluZztcclxuICAgIE5vZGVDb21wb25lbnQuaGVhZGluZ0NoYW5nZWRTdWJqZWN0Lm5leHQoKTtcclxuICB9XHJcblxyXG4gIGdldCBwYWdlTnVtYmVyQXRUb3AoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9wYWdlTnVtYmVyQXRUb3A7IH1cclxuICBzZXQgcGFnZU51bWJlckF0VG9wKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9wYWdlTnVtYmVyQXRUb3AgPSB2YWx1ZTtcclxuICAgIHRoaXMubnVtYmVyU3R5bGVbJ3BhZGRpbmctYm90dG9tJ10gPSB0aGlzLnBhZ2VOdW1iZXJBdFRvcCA/ICcwcHgnIDogYCR7dGhpcy5wYWRkaW5nfXB4YDtcclxuICAgIHRoaXMubnVtYmVyU3R5bGVbJ3BhZGRpbmctdG9wJ10gPSB0aGlzLnBhZ2VOdW1iZXJBdFRvcCA/IGAke3RoaXMucGFkZGluZ31weGAgOiAnMHB4JztcclxuICB9XHJcblxyXG4gIC8vIEFwcGx5IHRoZSBzdHlsZSB0byB0aGUgY3VycmVudCBub2RlLiBBc3N1bWVzIHRoZSBjb3JyZWN0IGF0dHJpYnV0ZXMgYXJlIGNvbnRhaW5lZC5cclxuICBhcHBseVN0eWxlKHN0eWxlOiBhbnkpIHtcclxuICAgIHRoaXMubm9kZVN0eWxlID0gc3R5bGUuY29udGVudFN0eWxlID8gdGhpcy5jb252ZXJ0U3R5bGVUb1B4KHN0eWxlLmNvbnRlbnRTdHlsZSkgOiB0aGlzLmNvbnZlcnRTdHlsZVRvUHgodGhpcy5kZWZhdWx0U3R5bGVzLmNvbnRlbnRTdHlsZSk7XHJcbiAgICB0aGlzLm51bWJlclN0eWxlID0gc3R5bGUubnVtYmVyU3R5bGUgPyBzdHlsZS5udW1iZXJTdHlsZSA6IHRoaXMuZGVmYXVsdFN0eWxlcy5udW1iZXJTdHlsZTtcclxuICAgIHRoaXMuaG9zdFN0eWxlID0gc3R5bGUuaG9zdFN0eWxlID8gc3R5bGUuaG9zdFN0eWxlIDogdGhpcy5kZWZhdWx0U3R5bGVzLmhvc3RTdHlsZTtcclxuICAgIC8vIExldCdzIG1hbmlwdWxhdGUgdGhlIHBhZGRpbmcgc3R5bGUgdGhhdCB3YXMgYWRkZWQgdG8gbWFuYWdlIHRvcCBvciBib3R0b20gcGxhY2VkIG51bWJlcmluZy5cclxuICAgIGlmICh0aGlzLm51bWJlclN0eWxlLnBhZGRpbmcgPiAnJykge1xyXG4gICAgICB0aGlzLnBhZGRpbmcgPSBwYXJzZUludCh0aGlzLm51bWJlclN0eWxlLnBhZGRpbmcucmVwbGFjZSgvXFxEL2csICcnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBhZGRpbmcgPSAxNjtcclxuICAgIH1cclxuICAgIHRoaXMubnVtYmVyU3R5bGVbJ3BhZGRpbmctbGVmdCddID0gYCR7cGFyc2VJbnQodGhpcy5ub2RlU3R5bGUud2lkdGgucmVwbGFjZSgvXFxEL2csICcnKSkvMn1weGA7XHJcbiAgICB0aGlzLmhlYWRpbmdTdHlsZSA9IHN0eWxlLmhlYWRpbmdTdHlsZSA/IHN0eWxlLmhlYWRpbmdTdHlsZSA6IHRoaXMuZGVmYXVsdFN0eWxlcy5oZWFkaW5nU3R5bGU7XHJcbiAgICB0aGlzLmhlYWRpbmdTdHlsZS53aWR0aCA9IHRoaXMubm9kZVN0eWxlLndpZHRoO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3dpZHRoJywgc3R5bGUud2lkdGgpO1xyXG4gICAgdGhpcy5ub2RlU3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgIHRoaXMud2lkdGggPSBwYXJzZUludCh0aGlzLm5vZGVTdHlsZS53aWR0aC5yZXBsYWNlKC9cXEQvZywgJycpKTtcclxuICAgIGlmICh0aGlzLmlzT3ZlcmxhaWQpIHtcclxuICAgICAgdGhpcy5ob3N0UG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBlbSB2YWx1ZXMgaW50byBweCB2YWx1ZXMgZm9yIHNpbXBsZXIgY2FsY3VsYXRpb24gbGF0ZXIuXHJcbiAgcHJpdmF0ZSBjb252ZXJ0U3R5bGVUb1B4KHN0eWxlOiBhbnkpOiBhbnkge1xyXG4gICAgbGV0IHRlbXBTdHlsZSA9IHN0eWxlO1xyXG4gICAgLy8gR2V0IHRoZSBmb250U2l6ZSBvZiB0aGUgc3R5bGUuXHJcbiAgICBsZXQgZm9udFNpemVTdWZmaXg6IHN0cmluZyA9IHRlbXBTdHlsZVsnZm9udFNpemUnXS5yZXBsYWNlKC9bXFxkXFwuXS9nLCAnJyk7XHJcbiAgICBsZXQgZm9udFNpemU6IG51bWJlciA9IHBhcnNlRmxvYXQodGVtcFN0eWxlWydmb250U2l6ZSddLnJlcGxhY2UoL1tBLVphLXpdL2csJycpKTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQga2V5IGluIHRlbXBTdHlsZSkge1xyXG4gICAgICAvLyBOb3Qgd2UgbmVlZCB0byBjaGVjayBlYWNoIHZhbHVlIG9ubHksIGZvciBlbSwgcHQsIHB4IGV0Yy4uXHJcbiAgICAgIGlmICgoPHN0cmluZz50ZW1wU3R5bGVba2V5XSkuaW5kZXhPZignZW0nKSA+IDApIHtcclxuICAgICAgICBsZXQgc3VmZml4ID0gdGVtcFN0eWxlW2tleV0ucmVwbGFjZSgvW1xcZFxcLl0vZywgJycpO1xyXG4gICAgICAgIHN3aXRjaChzdWZmaXgpIHtcclxuICAgICAgICAgIGNhc2UgJ2VtJzoge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGVtIHZhbHVlIHRvIHB4XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZTogbnVtYmVyID0gcGFyc2VGbG9hdCh0ZW1wU3R5bGVba2V5XS5yZXBsYWNlKC9bQS1aYS16XS9nLCcnKSk7XHJcbiAgICAgICAgICAgIHRlbXBTdHlsZVtrZXldID0gYCR7TWF0aC5yb3VuZCh2YWx1ZSpmb250U2l6ZSl9cHhgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGVtcFN0eWxlO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0cyB0aGUgbGluZUhlaWdodCBvZiB0aGUgY3VycmVudCBub2RlIHNvIHdlIGNhbiBkbyBvdGhlciB0cmltbWluZyBjYWxjdWxhdGlvbnMuXHJcbiAgcHJpdmF0ZSBwYXJzZUxpbmVIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgIGxldCBsaW5lSGVpZ2h0OiBzdHJpbmcgPSB0aGlzLnRleHREaXZSZWYubmF0aXZlRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0O1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KGxpbmVIZWlnaHQucmVwbGFjZSgvXFxEL2csICcnKSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFByb2R1Y2VzIGEgc2V0IG9mIGRhdGEgYWJvdXQgdGhlIGN1cnJlbnQgZHVtbXkgZGl2IGNvbXBhdGVkIHRvIHRoZSBjb250ZW50IGRpdi5cclxuICBwcml2YXRlIGNvbXBhcmVEaXZzKCk6IHsgJ2xpbmVzJzogbnVtYmVyLCAnZGlmZkxpbmVzJzogbnVtYmVyLCAnd29yZHMnOiBudW1iZXIgfSB7XHJcbiAgICBsZXQgbGluZUhlaWdodCA9IHRoaXMucGFyc2VMaW5lSGVpZ2h0KCk7XHJcbiAgICBsZXQgZHVtbXlMaW5lcyA9IE1hdGguZmxvb3IodGhpcy5kdW1teURpdlJlZi5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCAvIGxpbmVIZWlnaHQpO1xyXG4gICAgbGV0IGNvbnRlbnRMaW5lcyA9IE1hdGguZmxvb3IodGhpcy50ZXh0RGl2UmVmLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gbGluZUhlaWdodCk7XHJcbiAgICBsZXQgZHVtbXlUZXh0V29yZENvdW50ID0gdGhpcy5kdW1teVRleHQuc3BsaXQoJyAnKS5sZW5ndGg7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgJ2xpbmVzJzogZHVtbXlMaW5lcyxcclxuICAgICAgJ2RpZmZMaW5lcyc6IGR1bW15TGluZXMgLSBjb250ZW50TGluZXMsXHJcbiAgICAgICd3b3Jkcyc6IGR1bW15VGV4dFdvcmRDb3VudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBUcmltIGxvb3AgdGVzdC4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFRoaXMgaXMgYSBzbWFsbCBzdGF0ZSBtYWNoaW5lIHRvIHByb2Nlc3MgdGhlIHRyaW1taW5nIGFsZ29yaXRobS5cclxuICAvL1xyXG4gIHByaXZhdGUgYWRkaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBmaW5pc2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIHRyaW1taW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgXHJcbiAgcHJpdmF0ZSBjb3VudDogbnVtYmVyID0gMTAwO1xyXG5cclxuICBwcml2YXRlIG1hbmFnZVN0YXRlKCkge1xyXG4gICAgLy8gUHJvdGVjdCBhZ2FpbnN0IGluZmluaXRlIGxvb3AuXHJcbiAgICBpZiAodGhpcy5jb3VudC0tIDw9IDAgKSB7XHJcbiAgICAgIHRoaXMudHJpbW1pbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5hZGRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5maW5pc2hpbmcgPSBmYWxzZTtcclxuICAgICAgY29uc29sZS5sb2coJ0VSUk9SIC0gbG9vcCBjb3VudCA+IDEwMCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudHJpbW1pbmcpIHtcclxuICAgICAgdGhpcy50cmltKCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWRkaW5nKSB7XHJcbiAgICAgIHRoaXMuYWRkd29yZCgpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmZpbmlzaGluZykge1xyXG4gICAgICB0aGlzLmZpbmlzaCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmltKCkge1xyXG4gICAgbGV0IGNvbXBzID0gdGhpcy5jb21wYXJlRGl2cygpO1xyXG4gICAgbGV0IHdvcmRzVG9SZW1vdmUgPSBNYXRoLmZsb29yKGNvbXBzLndvcmRzL2NvbXBzLmxpbmVzKSAqIChjb21wcy5kaWZmTGluZXMgKyAxKTtcclxuICAgIGlmICh3b3Jkc1RvUmVtb3ZlID4gMCkge1xyXG4gICAgICB0aGlzLmR1bW15VGV4dCA9IHRoaXMuZHVtbXlUZXh0LnNwbGl0KCcgJykuc2xpY2UoMCwgY29tcHMud29yZHMgLSB3b3Jkc1RvUmVtb3ZlKS5qb2luKCcgJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRyaW1taW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuYWRkaW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5hZGR3b3JkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZHdvcmQoKSB7XHJcbiAgICBsZXQgY29tcHMgPSB0aGlzLmNvbXBhcmVEaXZzKCk7XHJcbiAgICBpZiAoY29tcHMuZGlmZkxpbmVzIDw9IC0xKSB7XHJcbiAgICAgIGlmICh0aGlzLmR1bW15VGV4dC5sZW5ndGggPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5kdW1teVRleHQgPSB0aGlzLmR1bW15VGV4dCArICcgJyArIHRoaXMudGV4dC5zcGxpdCgnICcpW2NvbXBzLndvcmRzXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBsYXN0IG5vZGUuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnRleHREaXZSZWYubmF0aXZlRWxlbWVudCwgJ3RleHRBbGlnbkxhc3QnLCAnbGVmdCcpO1xyXG4gICAgICAgIE5vZGVDb21wb25lbnQuZmluaXNoZWRTdWJqZWN0Lm5leHQoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVGFrZSBvZmYgdGhlIGxhc3Qgd29yZCBhZ2Fpbi5cclxuICAgICAgdGhpcy5kdW1teVRleHQgPSB0aGlzLmR1bW15VGV4dC5zcGxpdCgnICcpLnNsaWNlKDAsIGNvbXBzLndvcmRzIC0gMSkuam9pbignICcpO1xyXG4gICAgICB0aGlzLmFkZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmZpbmlzaGluZyA9IHRydWU7ICAgICAgICBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZmluaXNoKCkge1xyXG4gICAgbGV0IGNvbXBzID0gdGhpcy5jb21wYXJlRGl2cygpO1xyXG4gICAgbGV0IGxhc3R3b3JkOiBzdHJpbmdbXSA9IHRoaXMuZHVtbXlUZXh0LnNwbGl0KCcgJyk7XHJcbiAgICBsZXQgb3ZlcmZsb3dBcnJheSA9IHRoaXMudGV4dC5zcGxpdCgnICcpO1xyXG4gICAgbGV0IG92ZXJmbG93ID0gb3ZlcmZsb3dBcnJheS5zbGljZSh0aGlzLmR1bW15VGV4dC5zcGxpdCgnICcpLmxlbmd0aCkuam9pbignICcpO1xyXG4gICAgdGhpcy50ZXh0ID0gdGhpcy5kdW1teVRleHQ7XHJcbiAgICB0aGlzLmZpbmlzaGluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5vdmVyZmxvd1N1YmplY3QubmV4dChvdmVyZmxvdyk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgICBDb21wb25lbnRGYWN0b3J5LCBWaWV3Q29udGFpbmVyUmVmLCBDb21wb25lbnRSZWYsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOb2RlQ29tcG9uZW50IH0gZnJvbSAnLi9ub2RlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgU3ViamVjdCwgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBDcmVhdGVGbG93U2VydmljZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgcHJpdmF0ZSBub2RlTGlzdDogTm9kZUNvbXBvbmVudFtdID0gbmV3IEFycmF5PE5vZGVDb21wb25lbnQ+KCk7XHJcbiAgcHJpdmF0ZSBub2RlRmFjdG9yeTogQ29tcG9uZW50RmFjdG9yeTxOb2RlQ29tcG9uZW50PjtcclxuICBmaXJzdE9uVG9wOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgLy8gU3Vic2NyaXB0aW9uc1xyXG4gIHByaXZhdGUgZmluaXNoZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjsgLy8gRm9yIHdoZW4gdGhlIG5vZGVzIGFyZSBjb21wbGV0ZS5cclxuICBwcml2YXRlIGhlYWRpbmdDaGFuZ2VkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247IC8vIEZvciB3aGVuIHRoZSBoZWFkaW5nIGlzIGV4dGVybmFsbHkgY2hhbmdlZC5cclxuICBwcml2YXRlIG92ZXJGbG93U3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTsgLy8gRHVyaW5nIGdlbmVyYXRpb24gb2Ygbm9kZXMsIGZpcmVzIHdoZW4gdGhlcmUgYXJlIG1vcmUgbm9kZXMgdG8gZ2VuZXJhdGUuXHJcblxyXG4gIC8vIFByb3ZpZGUgYW4gYXJyYXkgb2Ygbm9kZXMgb25jZSB0aGUgZ2VuZXJhdGlvbiBpcyBjb21wbGV0ZS5cclxuICBwcml2YXRlIG5vZGVzU3ViamVjdDogU3ViamVjdDxOb2RlQ29tcG9uZW50W10+ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxOb2RlQ29tcG9uZW50W10+KG51bGwpO1xyXG4gIG5vZGVzOiBPYnNlcnZhYmxlPE5vZGVDb21wb25lbnRbXT4gPSB0aGlzLm5vZGVzU3ViamVjdCBhcyBPYnNlcnZhYmxlPE5vZGVDb21wb25lbnRbXT47XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLCBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpIHtcclxuICAgIHRoaXMubm9kZUZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KE5vZGVDb21wb25lbnQpO1xyXG4gICAgXHJcbiAgICAvLyBXaGVuIGFsbCBub2RlcyBhcmUgZmluaXNoZWQgZ2VuZXJhdGluZywgZG8gc29tZSBob3VzZXdvcmsuXHJcbiAgICB0aGlzLmZpbmlzaGVkU3Vic2NyaXB0aW9uID0gIE5vZGVDb21wb25lbnQuZmluaXNoZWQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy5ub2RlTGlzdC5mb3JFYWNoKG5vZGUgPT4gIG5vZGUuaXNWaXNpYmxlID0gdHJ1ZSk7IC8vIE1ha2UgYWxsIHZpc2libGUgb25jZSBjb21wbGV0ZS5cclxuXHJcbiAgICAgIC8vIElmIGhlYWRpbmdzIGFyZSBtb2RpZmllZCBleHRlcm5hbGx5LCB0aGVuIHVwZGF0ZSBzaWJsaW5nIG5vZGVzIHRvIG1haW50YWluIGNvbnNpc3RlbnQgZm9ybWF0aW5nLlxyXG4gICAgICB0aGlzLmhlYWRpbmdDaGFuZ2VkU3Vic2NyaXB0aW9uID0gTm9kZUNvbXBvbmVudC5oZWFkaW5nQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIC8vIExvb3Agb25jZSB0byBzZWUgaWYgYWxsIGFyZSBlbXB0eS5cclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubm9kZUxpc3QuZm9yRWFjaChub2RlID0+IHsgXHJcbiAgICAgICAgICBjb3VudCA9IG5vZGUuaGVhZGluZyA8PSAnICcgPyBjb3VudCArIDEgOiBjb3VudCAtIDE7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIExvb3AgYWdhaW4gdG8gdXBkYXRlIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBoZWFkaW5ncy5cclxuICAgICAgICB0aGlzLm5vZGVMaXN0LmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICBub2RlLnNob3dIZWFkaW5nID0gY291bnQgPT09IHRoaXMubm9kZUxpc3QubGVuZ3RoID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIE1ha2UgbGlzdCBvZiBub2RlcyBhdmFpbGFibGUgb25jZSBhbGwgYXJlIGNvbXBsZXRlLlxyXG4gICAgICB0aGlzLm5vZGVzU3ViamVjdC5uZXh0KHRoaXMubm9kZUxpc3QpO1xyXG4gICAgfSk7XHJcbiAgfSBcclxuXHJcbiAgY2xlYXJOb2RlcygpIHtcclxuICAgIHRoaXMubm9kZUxpc3QgPSBbXTtcclxuICB9XHJcblxyXG4gIC8vIFRoaXMgd2lsbCBraWNrIG9mZiBhIHByb2Nlc3MgdGhhdCBnZW5lcmF0ZXMgYSBub2RlIGV2ZXJ5IHRpbWUgYSBnZW5lcmF0ZWQgbm9kZSBpcyB0b28gZnVsbCBhbmQgb3ZlcmZsb3dzIHdpdGggdGV4dC5cclxuICBjcmVhdGVGbG93KHRleHRQYXNzYWdlOiBzdHJpbmcsIFxyXG4gICAgICAgICAgICAgbG9jYXRpb246IFZpZXdDb250YWluZXJSZWYsIFxyXG4gICAgICAgICAgICAgc3R5bGU6IGFueSwgXHJcbiAgICAgICAgICAgICBzaG93UGFnZU51bWJlcnM6IGJvb2xlYW4sIFxyXG4gICAgICAgICAgICAgaXNPdmVybGFpZDogYm9vbGVhbikge1xyXG5cclxuICAgIGxldCBub2RlOiBOb2RlQ29tcG9uZW50ID0gdGhpcy5jcmVhdGVOb2RlKHRleHRQYXNzYWdlLCBsb2NhdGlvbiwgc3R5bGUsIHNob3dQYWdlTnVtYmVycywgaXNPdmVybGFpZCk7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBhIG5ldyBub2RlIGlmIHRoZXJlIGlzIGFueSBvdmVyZmxvdyB0ZXh0IGZyb20gbGFzdCBub2RlIGdlbmVyYXRlZC5cclxuICAgIC8vIExhc3Qgbm9kZSB3aWxsIGtub3cgd2hlbiBpdCBpcyB0aGUgbGFzdCBvbmUsIGFuZCB3aWxsIFxyXG4gICAgdGhpcy5vdmVyRmxvd1N1YnNjcmlwdGlvbnMucHVzaChub2RlLm92ZXJmbG93LnN1YnNjcmliZShvdmVyZmxvd1RleHQgPT4ge1xyXG4gICAgICBpZiAob3ZlcmZsb3dUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVGbG93KG92ZXJmbG93VGV4dCwgbG9jYXRpb24sIHN0eWxlLCBzaG93UGFnZU51bWJlcnMsIGlzT3ZlcmxhaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZU5vZGUoY29udGVudDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbj86IFZpZXdDb250YWluZXJSZWYsIFxyXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZT86IGFueSwgc2hvd1BhZ2VOdW1iZXJzPzogXHJcbiAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4sIGlzT3ZlcmxhaWQ/OiBib29sZWFuKTogTm9kZUNvbXBvbmVudCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAvLyBHZW5lcmF0ZSB0aGUgbm9kZSB3aXRoIHRoZSBub2RlRmFjdG9yeS5cclxuICAgIGxldCBub2RlUmVmOiBDb21wb25lbnRSZWY8Tm9kZUNvbXBvbmVudD47XHJcbiAgICBpZiAobG9jYXRpb24gfHwgbG9jYXRpb24gaW5zdGFuY2VvZiBWaWV3Q29udGFpbmVyUmVmKSB7XHJcbiAgICAgIG5vZGVSZWYgPSBsb2NhdGlvbi5jcmVhdGVDb21wb25lbnQodGhpcy5ub2RlRmFjdG9yeSwgdW5kZWZpbmVkLCB0aGlzLmluamVjdG9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5vZGVSZWYgPSB0aGlzLm5vZGVGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2RlXHJcbiAgICBub2RlUmVmLmluc3RhbmNlLmlzT3ZlcmxhaWQgPSBpc092ZXJsYWlkO1xyXG4gICAgbm9kZVJlZi5pbnN0YW5jZS5zaG93UGFnZU51bWJlciA9IHNob3dQYWdlTnVtYmVycztcclxuICAgIG5vZGVSZWYuaW5zdGFuY2UudGV4dCA9IGNvbnRlbnQ7XHJcbiAgICBpZiAoc3R5bGUpIHtcclxuICAgICAgbm9kZVJlZi5pbnN0YW5jZS5hcHBseVN0eWxlKHN0eWxlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWRkIG5vZGUgdG8gbGlzdCBvZiBub2RlcyBhbmQgdXBkYXRlIGl0cyBpbmRleCB2YWx1ZS5cclxuICAgIHRoaXMubm9kZUxpc3QucHVzaChub2RlUmVmLmluc3RhbmNlKTtcclxuICAgIG5vZGVSZWYuaW5zdGFuY2UuaW5kZXggPSB0aGlzLmZpcnN0T25Ub3AgPyAxMDAtdGhpcy5ub2RlTGlzdC5sZW5ndGggOiB0aGlzLm5vZGVMaXN0Lmxlbmd0aDtcclxuXHJcbiAgICByZXR1cm4gbm9kZVJlZi5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8vIFRpZHkgdXAgc3Vic2NyaXB0aW9ucy5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZmluaXNoZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMuaGVhZGluZ0NoYW5nZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMub3ZlckZsb3dTdWJzY3JpcHRpb25zLmZvckVhY2goc3Vic2NyaXB0aW9uID0+IHtcclxuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgVmlld0NoaWxkLCBcclxuICBWaWV3Q29udGFpbmVyUmVmLFxyXG4gIElucHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ3JlYXRlRmxvd1NlcnZpY2UgfSBmcm9tICcuL2NyZWF0ZS1mbG93LnNlcnZpY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICduZy10ZXh0ZmxvdycsXHJcbiAgdGVtcGxhdGU6IGAgXHJcbiAgICA8bmctY29udGFpbmVyICN2aWV3Q29udGFpbmVyPjwvbmctY29udGFpbmVyPlxyXG4gIGBcclxufSlcclxuLy8gQSBiYXNpYyBjb21wb25lbnQgdGhhdCB1c2VzIHRoZSBDcmVhdGVGbG93U2VydmljZSB0byBnZW5lcmF0ZSBhbmQgZGlzcGxheSB0aGUgbm9kZXNcclxuLy8gYmFzZWQgb24gdGhlIGNvbnRlbnQgcHJvdmlkZWQgaW4gdGhlc2UgaW5wdXRzLlxyXG5leHBvcnQgY2xhc3MgTmdUZXh0Zmxvd0NvbXBvbmVudCB7XHJcbiAgQFZpZXdDaGlsZCgndmlld0NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZn0pIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgQElucHV0KCkgbm9kZVN0eWxlczogYW55ID0ge307XHJcbiAgQElucHV0KCkgZmlyc3RPblRvcDogYm9vbGVhbiA9IHRydWU7XHJcbiAgQElucHV0KCkgc2hvd1BhZ2VOdW1iZXJzOiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGlzT3ZlcmxhaWQ6IGJvb2xlYW47XHJcbiAgXHJcbiAgLy8gQ29udGVudCBjaGFuZ2UgaGFuZGxpbmcuXHJcbiAgcHJpdmF0ZSBfY29udGVudDogc3RyaW5nO1xyXG4gIGdldCBjb250ZW50KCk6IHN0cmluZyB7IHJldHVybiB0aGlzLl9jb250ZW50OyB9XHJcbiAgQElucHV0KCkgc2V0IGNvbnRlbnQodGV4dDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9jb250ZW50ID0gdGV4dDtcclxuICAgIC8vIENsZWFyIHRoZSBub2RlcyBvdXQgb2YgdGhlIE5vZGVDb21wb25lbnRbXSBhcnJheS5cclxuICAgIHRoaXMubm9kZVNlcnZpY2UuY2xlYXJOb2RlcygpO1xyXG4gICAgdGhpcy52aWV3Q29udGFpbmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLm5vZGVTZXJ2aWNlLmNyZWF0ZUZsb3codGhpcy5jb250ZW50LCB0aGlzLnZpZXdDb250YWluZXIsIHRoaXMubm9kZVN0eWxlcywgdGhpcy5zaG93UGFnZU51bWJlcnMsIHRoaXMuaXNPdmVybGFpZCk7ICAgIFxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBub2RlU2VydmljZTogQ3JlYXRlRmxvd1NlcnZpY2UpIHtcclxuICAgIG5vZGVTZXJ2aWNlLmZpcnN0T25Ub3AgPSB0aGlzLmZpcnN0T25Ub3A7XHJcbiAgfSBcclxufVxyXG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuLy8gTW9kdWxlIGNvbXBvbmVudHNcclxuaW1wb3J0IHsgTmdUZXh0Zmxvd0NvbXBvbmVudCB9IGZyb20gJy4vbmctdGV4dGZsb3cuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTm9kZUNvbXBvbmVudCB9IGZyb20gJy4vbm9kZS5jb21wb25lbnQnO1xyXG5cclxuLy8gU2VydmljZXNcclxuaW1wb3J0IHsgQ3JlYXRlRmxvd1NlcnZpY2UgfSBmcm9tICcuL2NyZWF0ZS1mbG93LnNlcnZpY2UnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcclxuICBkZWNsYXJhdGlvbnM6IFtOZ1RleHRmbG93Q29tcG9uZW50LCBOb2RlQ29tcG9uZW50XSxcclxuICBlbnRyeUNvbXBvbmVudHM6IFtOb2RlQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbTmdUZXh0Zmxvd0NvbXBvbmVudF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE5nVGV4dGZsb3dNb2R1bGUge1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGZvclJvb3QoKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmdNb2R1bGU6IE5nVGV4dGZsb3dNb2R1bGUsXHJcbiAgICAgIHByb3ZpZGVyczogWyBDcmVhdGVGbG93U2VydmljZSBdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuIH1cclxuIl0sIm5hbWVzIjpbIlN1YmplY3QiLCJkZWJvdW5jZSIsImludGVydmFsIiwiQ29tcG9uZW50IiwiUmVuZGVyZXIyIiwiRWxlbWVudFJlZiIsIlZpZXdDaGlsZCIsIkhvc3RCaW5kaW5nIiwiQmVoYXZpb3JTdWJqZWN0IiwiVmlld0NvbnRhaW5lclJlZiIsIkluamVjdGFibGUiLCJJbmplY3RvciIsIkNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciIsIklucHV0IiwiTmdNb2R1bGUiLCJDb21tb25Nb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7UUE4R0UsdUJBQW9CLFFBQW1CLEVBQVUsVUFBc0I7WUFBbkQsYUFBUSxHQUFSLFFBQVEsQ0FBVztZQUFVLGVBQVUsR0FBVixVQUFVLENBQVk7NEJBeEQ1QyxFQUFFOzhCQUNDLEtBQUs7b0NBQ0MsS0FBSzsrQkFJbEIsSUFBSTs7Z0NBT21CLEVBQUU7a0NBQ0UsUUFBUTs7K0JBR3ZDLEVBQUU7Z0NBQ0QsRUFBRTs2QkFDTCxFQUFFOzZCQUNGLEVBQUU7aUNBR0s7Z0JBQ3RCLFNBQVMsRUFBRSxFQUFFO2dCQUNiLFlBQVksRUFBRTtvQkFDWixR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